CREATE TABLE PUBLIC.CATEGORY(ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, NAME varchar(45) NOT NULL, TAGS varchar(45))
CREATE UNIQUE INDEX SQL_CATEGORY_ID_INDEX ON PUBLIC.CATEGORY(ID)
CREATE TABLE PUBLIC.PERSON(ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, FIRSTNAME varchar(50) NOT NULL, LASTNAME varchar(100) NOT NULL, EMAIL varchar(45) NOT NULL UNIQUE, ADDRESS varchar(45) NOT NULL, CITY varchar(45) NOT NULL, PASSWORD varchar(100), DTYPE varchar(31))
CREATE UNIQUE INDEX SQL_PERSON_EMAIL_INDEX ON PUBLIC.PERSON(EMAIL)
CREATE UNIQUE INDEX SQL_PERSON_ID_INDEX ON PUBLIC.PERSON(ID)
CREATE TABLE PUBLIC.GROUPS(ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, NAME varchar(50) NOT NULL, DESCRIPTION varchar(300))
CREATE TABLE PUBLIC.PERSON_GROUPS(GROUPS_ID int NOT NULL, EMAIL varchar(45) NOT NULL)
ALTER TABLE PUBLIC.PERSON_GROUPS ADD CONSTRAINT FK_PERSON_GROUPS_PERSON FOREIGN KEY (EMAIL) REFERENCES PUBLIC.PERSON(EMAIL)
ALTER TABLE PUBLIC.PERSON_GROUPS ADD CONSTRAINT FK_PERSON_GROUPS_GROUPS FOREIGN KEY (GROUPS_ID) REFERENCES PUBLIC.GROUPS(ID)
CREATE INDEX SQL_PERSONGROUPS_EMAIL_INDEX ON PUBLIC.PERSON_GROUPS(EMAIL)
CREATE INDEX SQL_PERSONGROUPS_ID_INDEX ON PUBLIC.PERSON_GROUPS(GROUPS_ID)
CREATE TABLE PUBLIC.ORDER_STATUS(ID int NOT NULL PRIMARY KEY, STATUS varchar(45) NOT NULL, DESCRIPTION varchar(200))
CREATE UNIQUE INDEX SQL_ORDERSTATUS_ID_INDEX ON PUBLIC.ORDER_STATUS(ID)
CREATE TABLE PUBLIC.CUSTOMER_ORDER(ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, AMOUNT float(52) NOT NULL, DATE_CREATED timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL, CUSTOMER_ID int NOT NULL, STATUS_ID int NOT NULL)
ALTER TABLE PUBLIC.CUSTOMER_ORDER ADD CONSTRAINT FK_CUSTOMER_ORDER_ORDER_STATUS1 FOREIGN KEY (STATUS_ID) REFERENCES PUBLIC.ORDER_STATUS(ID)
ALTER TABLE PUBLIC.CUSTOMER_ORDER ADD CONSTRAINT FK_CUSTOMER_ORDER_CUSTOMER1 FOREIGN KEY (CUSTOMER_ID) REFERENCES PUBLIC.PERSON(ID)
CREATE INDEX SQL_ORDER_STATUS_ID_INDEX ON PUBLIC.CUSTOMER_ORDER(STATUS_ID)
CREATE INDEX SQL_ORDER_CUSTOMER_ID_INDEX ON PUBLIC.CUSTOMER_ORDER(CUSTOMER_ID)
CREATE UNIQUE INDEX SQL_ORDER_ID_INDEX ON PUBLIC.CUSTOMER_ORDER(ID)
CREATE TABLE PUBLIC.PRODUCT(ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY, NAME varchar(45) NOT NULL, PRICE decimal(10,2) NOT NULL, DESCRIPTION varchar(145) NOT NULL, IMG varchar(45), CATEGORY_ID int NOT NULL, IMG_SRC bytea)
ALTER TABLE PUBLIC.PRODUCT ADD CONSTRAINT FK_PRODUCT_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES PUBLIC.CATEGORY(ID)
CREATE UNIQUE INDEX SQL_PRODUCT_ID_INDEX ON PUBLIC.PRODUCT(ID)
CREATE TABLE PUBLIC.ORDER_DETAIL(ORDER_ID int NOT NULL, PRODUCT_ID int NOT NULL, QTY int NOT NULL, CONSTRAINT SQL_ORDER_PRODUCT_PK PRIMARY KEY (ORDER_ID,PRODUCT_ID))
ALTER TABLE PUBLIC.ORDER_DETAIL ADD CONSTRAINT FK_ORDER_DETAIL_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PUBLIC.PRODUCT(ID)
ALTER TABLE PUBLIC.ORDER_DETAIL ADD CONSTRAINT FK_ORDER_DETAIL_ORDER FOREIGN KEY (ORDER_ID) REFERENCES PUBLIC.CUSTOMER_ORDER(ID)
CREATE UNIQUE INDEX SQL_ORDER_DETAIL_INDEX ON PUBLIC.ORDER_DETAIL(ORDER_ID, PRODUCT_ID)
CREATE INDEX SQL_ORDER_PRODUCT_ID_INDEX ON PUBLIC.ORDER_DETAIL(PRODUCT_ID)
CREATE INDEX SQL_ORDER_DETAIL_ID_INDEX ON PUBLIC.ORDER_DETAIL(ORDER_ID)